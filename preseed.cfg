d-i debian-installer/locale string en_US
d-i console-setup/ask_detect boolean false
d-i keyboard-configuration/layoutcode string us

d-i netcfg/get_hostname string assembly
d-i netcfg/get_domain string meet

d-i clock-setup/utc boolean true
d-i time/zone string Asia/Jerusalem

d-i passwd/root-login boolean true
d-i passwd/root-password-crypted password $1$QSCHgV/5$S1hVlqG.aUkn6PfDDUi.C/

d-i passwd/make-user boolean false

d-i partman-auto/method string raid
d-i partman-auto/disk string /dev/sda /dev/sdb
d-i partman-lvm/device_remove_lvm boolean true
d-i partman-md/device_remove_md boolean true
d-i partman-auto-lvm/guided_size string 100%

d-i partman-auto/choose_recipe select raid-plus-lvm
d-i partman-auto/expert_recipe string                        \
  raid-plus-lvm ::                                           \
    512 512 512 raid                                         \
      $lvmignore{ }                                          \
      $primary{ } method{ raid } \
      .                           \
    5000 10000 -1 raid                                       \
      $lvmignore{ }                                          \
      $primary{ } method{ raid } \
      .                           \
    500 8000 150% swap                                 \
      $defaultignore{ }                    \
      $lvmok{ }                            \
      lv_name{ swap } method{ swap } format { } \
      .         \
    5000 10000 10000 ext4                                    \
      $defaultignore{ }                    \
      $lvmok{ }                            \
      lv_name{ root } method{ format } format { }         \
      use_filesystem{ } filesystem{ ext4 } mountpoint{ / } \
      . \
    5000 100000 -1 ext4                                      \
      $defaultignore{ }                    \
      $lvmok{ }                            \
      lv_name{ home } method{ format } format { }         \
      use_filesystem{ } filesystem{ ext4 } mountpoint{ /srv/home } \
      .

d-i partman-auto-raid/recipe string      \
  1 2 0 ext3 /boot /dev/sda1#/dev/sdb1 . \
  1 2 0 lvm  -     /dev/sda2#/dev/sdb2 .

d-i grub-installer/only_debian boolean true
d-i grub-installer/bootdev string (hd0,0) (hd1,0)

d-i mirror/http/proxy string

d-i pkgsel/update-policy select unattended-upgrades

d-i base-installer/kernel/override-image string linux-server

d-i pkgsel/language-pack-patterns string
d-i pkgsel/install-language-support boolean false

tasksel tasksel/force-tasks string server
d-i tasksel/first multiselect OpenSSH server, DNS server

d-i debian-installer/quiet  boolean false
d-i debian-installer/splash boolean false

d-i pkgsel/include string \
  approx \
  debconf-utils \
  epoptes nautilus \
  git \
  isc-dhcp-server \
  ldap-auth-client nscd ldap-utils \
  nfs-kernel-server nfs4-acl-tools \
  ruby rubygems \
  slapd \
  tftpd-hpa \
  vim

bind9 bind9/run-resolvconf boolean true

isc-dhcp-server isc-dhcp-server/interfaces string eth1

ldap-auth-config ldap-auth-config/ldapns/ldap-server string ldap:///
ldap-auth-config ldap-auth-config/ldapns/base-dn string dc=meet,dc=mit,dc=edu
ldap-auth-config ldap-auth-config/ldapns/ldap_version select 3
ldap-auth-config ldap-auth-config/dbrootlogin boolean false
ldap-auth-config ldap-auth-config/dblogin boolean false

slapd slapd/password1 password
slapd slapd/password2 password

tftpd-hpa tftpd-hpa/address string 192.168.30.1:69

ufw ufw/enable boolean true
ufw ufw/allow_known_ports multiselect DNS, SSH, HTTP, HTTPS

d-i preseed/late_command string \
  in-target wget http://meet.github.com/config-assembly-ubuntu-precise/late_command.sh ; \
  in-target bash late_command.sh ; \
  in-target rm late_command.sh
